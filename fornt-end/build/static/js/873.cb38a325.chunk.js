"use strict";(self.webpackChunkfornt_end=self.webpackChunkfornt_end||[]).push([[873],{254:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var r=a(43),c=a(799),o=a(276),s=a(334),n=a(873),i=a(579);const d=()=>{var e,t,a;const{category:d}=(0,c.g)(),[l,u]=(0,r.useState)([]),[p,h]=(0,r.useState)([]);return(0,r.useEffect)((()=>{fetch("https://api.devsite.cfd/category_pages").then((e=>e.json())).then((e=>{const t=e.filter((e=>e.category_name===decodeURIComponent(d)));console.log("Filtered",t),u(t)})).catch((e=>console.log("Eroare la fetch",e)))}),[]),(0,r.useEffect)((()=>{fetch(`https://api.devsite.cfd/search_product/${decodeURIComponent(d)}`).then((e=>e.json())).then((e=>{h(e),console.log("Asta e data:",e),console.log(d)})).catch((e=>console.log("Eroare la fetch",e)))}),[]),console.log("URL-ul imaginii:",`https://www.devsite.cfd${null===(e=l[0])||void 0===e?void 0:e.image.replace(/ /g,"%20")}`),(0,i.jsxs)("div",{className:"telefoane-container",children:[(0,i.jsx)(o.A,{}),(0,i.jsxs)("main",{children:[l.length>0?(0,i.jsx)("div",{className:"hero-div-telefoanePage",style:{backgroundImage:`url("https://www.devsite.cfd${null===(t=l[0])||void 0===t?void 0:t.image.replace(/ /g,"%20")}")`},children:(0,i.jsx)("div",{className:"hero-text-Telefoane",children:(0,i.jsx)("h1",{className:"hero-title-Telefoane",children:null===(a=l[0])||void 0===a?void 0:a.page_title})})}):(0,i.jsx)("div",{className:"hero-div-telefoanePage",children:"Se \xeencarc\u0103..."}),(0,i.jsx)("div",{className:"product-cards-div",children:p.length>0?p.map((e=>(0,i.jsx)(n.A,{productId:e.id,imgURL:e.image_url,name:e.name,price:e.price,category:e.category},e.id))):"Se incarca cards"})]}),(0,i.jsx)(s.A,{})]})}},873:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(43),c=a(799),o=a(579);const s=function(e){let{productId:t,imgURL:a,name:s,price:n,category:i}=e;const[d,l]=(0,r.useState)(null),[u,p]=(0,r.useState)([]),h=(0,c.Zp)();return(0,r.useEffect)((()=>{(async()=>{try{const e=await fetch("https://api.devsite.cfd/auth/user",{credentials:"include"});if(!e.ok)throw new Error("Eroare la ob\u021binerea utilizatorului");const t=await e.json();t.user?l(t.user.id):alert("Nu e\u0219ti autentificat")}catch(e){console.error("Eroare:",e)}})()}),[]),(0,o.jsxs)("div",{className:"phone-card",children:[(0,o.jsx)("img",{className:"phone-card-image",src:a,alt:s,onClick:()=>h(`/products/${s}`),style:{cursor:"pointer"}}),(0,o.jsx)("h2",{className:"phone-card-title",onClick:()=>h(`/products/${s}`),style:{cursor:"pointer"},children:s}),(0,o.jsxs)("h3",{className:"phone-card-price",children:["$",n]}),(0,o.jsx)("button",{className:"phone-card-button",onClick:async()=>{if(!d)return void alert("Trebuie s\u0103 fii autentificat pentru a ad\u0103uga produse \xeen co\u0219.");const e={product_name:s,product_price:n,product_id:t,product_img:a,quantity:1};try{const t=await fetch("https://api.devsite.cfd/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:d,product_id:e.product_id,product_name:e.product_name,product_price:e.product_price,product_img:e.product_img,quantity:e.quantity})});if(!t.ok)throw new Error("Eroare la ad\u0103ugarea produsului \xeen co\u0219");const a=await t.json();p((e=>[...e,a.product])),alert("Produsul a fost ad\u0103ugat \xeen co\u0219!")}catch(r){console.error("Eroare la ad\u0103ugarea produsului:",r),alert("Eroare la ad\u0103ugarea produsului \xeen co\u0219")}},children:"Adaug\u0103 \xeen co\u0219"})]})}}}]);
//# sourceMappingURL=873.cb38a325.chunk.js.map