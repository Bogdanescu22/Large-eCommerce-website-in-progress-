"use strict";(self.webpackChunkfornt_end=self.webpackChunkfornt_end||[]).push([[346],{346:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var n=s(43),i=s(591),r=s(579);const o=e=>{let{setEmail:t,setPassword:s,Login:n,setForgotForm:i}=e;return(0,r.jsxs)("div",{className:"admin-login-page-form",children:[(0,r.jsx)("div",{children:(0,r.jsx)("h1",{children:"DevSite Admin"})}),(0,r.jsx)("hr",{}),(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"text",name:"email",placeholder:"Email",onChange:e=>t(e.target.value)})}),(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"password",name:"password",placeholder:"Password",onChange:e=>s(e.target.value)})}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:n,children:"Log in"})}),(0,r.jsx)("div",{children:(0,r.jsx)("p",{onClick:()=>i(!0),children:"Ai uitat parola?"})})]})},a=e=>{let{ForgotPassword:t}=e;const[s,i]=(0,n.useState)(15),[o,a]=(0,n.useState)(""),[l,d]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{if(l){if(s>0){const e=setInterval((()=>{i((e=>e-1))}),1e3);return()=>clearInterval(e)}a("Nu ai primit nimic? Retrimite!"),d(!1)}}),[s,l]),(0,r.jsxs)("div",{className:"waiting-time-reset-password",children:[l?(0,r.jsxs)("p",{children:["A\u0219teapt\u0103 ",s," secunde"]}):(0,r.jsx)("p",{children:o}),!l&&(0,r.jsx)("button",{onClick:()=>{i(15),d(!0),a(""),t()},children:"Trimite/Retrimite"})]})},l=e=>{let{setEmail2:t,ForgotPassword:s,setForgotForm:n}=e;return(0,r.jsxs)("div",{className:"admin-forgot-password-form",children:[(0,r.jsx)("div",{children:(0,r.jsx)("h1",{children:"DevSite Admin"})}),(0,r.jsx)("hr",{}),(0,r.jsx)("p",{onClick:()=>n(!1),children:"Inapoi la LogIn"}),(0,r.jsx)("div",{className:"admin-forgot-password-form-input",children:(0,r.jsx)("input",{onChange:e=>t(e.target.value),type:"email",placeholder:"Introdu adresa de email"})}),(0,r.jsx)(a,{ForgotPassword:s})]})},d=()=>{const[e,t]=(0,n.useState)(""),[s,a]=(0,n.useState)(""),[d,c]=(0,n.useState)(""),[h,m]=(0,n.useState)(!1);return(0,r.jsxs)("div",{className:"admin-login-page",children:[(0,r.jsxs)(i.m,{children:[(0,r.jsx)("title",{children:"Admin Login - DevSite"}),(0,r.jsx)("meta",{name:"robots",content:"noindex, nofollow"})]}),(0,r.jsx)("main",{className:"admin-login-page-main",children:h?(0,r.jsx)(l,{setEmail2:c,ForgotPassword:()=>{d&&fetch("https://api.devsite.cfd/admin/reset-password",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email2:d})}).then((e=>e.json())).then((e=>console.log("Email trimis:",e))).catch((e=>console.error("Eroare la resetare parol\u0103:",e)))},setForgotForm:m}):(0,r.jsx)(o,{setEmail:a,setPassword:t,Login:t=>{t.preventDefault(),fetch("https://api.devsite.cfd/admin/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:e})}).then((e=>{if(!e.ok)throw new Error("Eroare la fetch pt login");return e.json()})).then((e=>{console.log("Login cu succes:",e),window.location.href="/admin-panel"})).catch((e=>console.error("Eroare la login",e)))},setForgotForm:m})})]})}}}]);
//# sourceMappingURL=346.21f52007.chunk.js.map