"use strict";(self.webpackChunkfornt_end=self.webpackChunkfornt_end||[]).push([[831],{831:(e,s,r)=>{r.r(s),r.d(s,{default:()=>d});var t=r(43),a=r(276),c=r(334),i=r(799),l=r(579);const n=e=>{let{imgURL:s,name:r,price:t,handleButtonClick:a}=e;const c=(0,i.Zp)();return(0,l.jsxs)("div",{className:"phone-card-SearchPage",children:[(0,l.jsx)("img",{className:"phone-card-image-SearchPage",src:s,alt:r,onClick:()=>c(`/products/${r}`),style:{cursor:"pointer"}}),(0,l.jsx)("div",{className:"title-search-div",children:(0,l.jsx)("h2",{className:"phone-card-title-searchPage",onClick:()=>c(`/products/${r}`),style:{cursor:"pointer"},children:r})}),(0,l.jsxs)("h3",{className:"phone-card-price",children:["$",t]}),(0,l.jsx)("button",{className:"phone-card-button",onClick:a,children:"Adaug\u0103 \xeen co\u0219"})]})},d=()=>{const[e,s]=(0,t.useState)([]),[r,d]=(0,t.useState)(null),[o,h]=(0,t.useState)([]),{text:u}=(0,i.g)(),[p,x]=(0,t.useState)([]),[j,v]=(0,t.useState)([]),[m,g]=(0,t.useState)([]),[b,f]=(0,t.useState)(""),[k,N]=(0,t.useState)(!1),[C,w]=(0,t.useState)(!1),[S,y]=(0,t.useState)(!1),[_,P]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{try{const e=await fetch("https://api.devsite.cfd/auth/user",{credentials:"include"});if(!e.ok)throw new Error("Eroare la ob\u021binerea utilizatorului");const s=await e.json();d(s.user.id)}catch(e){console.error("Eroare:",e)}})()}),[]),(0,t.useEffect)((()=>{u?fetch(`https://api.devsite.cfd/search-result/${u}`,{credentials:"include"}).then((e=>e.json())).then((e=>{s(e),v(e),console.log("Datele primite din fetch-ul pt produse filtrate",e)})).catch((e=>console.log("Eroare la obtinerea produselor",e))):console.log("SearchText nu exista!")}),[u]),(0,t.useEffect)((()=>{let e=j;if(p.length>0&&(e=e.filter((e=>p.includes(e.brand)))),m.length>0){const s=Math.min(...m.map((e=>parseInt(e.split("-")[0]||"0")))),r=Math.max(...m.map((e=>parseInt(e.split("-")[1]||"99999"))));e=e.filter((e=>e.price>=s&&e.price<=r))}"pret_crescator"===_?e=e.sort(((e,s)=>e.price-s.price)):"pret_descrescator"===_&&(e=e.sort(((e,s)=>s.price-e.price))),s(e)}),[p,m,j]),(0,t.useEffect)((()=>{"pret_crescator"===_?s((e=>[...e].sort(((e,s)=>e.price-s.price)))):"pret_descrescator"===_&&s((e=>[...e].sort(((e,s)=>s.price-e.price))))}),[_]);const E=e=>{const{value:s,checked:r}=e.target;x((e=>r?[...e,s]:e.filter((e=>e!==s))))},L=e=>{const{value:s,checked:r}=e.target;g((e=>r?[...e,s]:e.filter((e=>e!==s))))},F=()=>{const e=j.reduce(((e,s)=>(e[s.brand]||(e[s.brand]=[]),e[s.brand].push(s),e)),{});return Object.keys(e).filter((e=>e.toLowerCase().includes(b))).map((e=>(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{type:"checkbox",id:e,value:e,checked:p.includes(e),onChange:E}),(0,l.jsx)("label",{htmlFor:e,children:e})]},e)))};return(0,l.jsxs)("div",{className:"search-result-page",children:[(0,l.jsx)(a.A,{}),(0,l.jsxs)("main",{children:[(0,l.jsxs)("div",{className:"search-result-page-h1-order-by-div",children:[(0,l.jsx)("div",{className:"search-result-page-h1",children:(0,l.jsxs)("h1",{children:["Rezultate ",(0,l.jsxs)("span",{children:["(",e.length,")"]}),":"]})}),(0,l.jsxs)("div",{className:"search-result-page-order-by",children:[(0,l.jsx)("label",{htmlFor:"",children:"Ordoneaz\u0103 dup\u0103:"}),(0,l.jsxs)("select",{onChange:e=>{P(e.target.value)},value:_,name:"orderBy",children:[(0,l.jsx)("option",{value:"",children:"Selecteaza"}),(0,l.jsx)("option",{value:"pret_crescator",children:"Pret crescator"}),(0,l.jsx)("option",{value:"pret_descrescator",children:"Pret descrescator"})]})]})]}),(0,l.jsx)("div",{className:"filters-button-div",children:(0,l.jsx)("button",{onClick:()=>N(!k),className:"filters-button",children:"Filtre"})}),(0,l.jsxs)("div",{className:"search-result-page-filters-productCards-div",children:[(0,l.jsxs)("div",{className:"search-result-page-filters-div "+(k?"active":""),children:[(0,l.jsxs)("div",{className:"search-result-page-filters-card",children:[(0,l.jsxs)("div",{className:"brand-h1-incon-div",children:[(0,l.jsx)("div",{className:"brand-h1-div",children:(0,l.jsx)("h3",{onClick:()=>y(!S),children:k?"Brand":"Brand:"})}),(0,l.jsx)("div",{className:"brand-icon-div",children:S?(0,l.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M6 9l6 6 6-6",stroke:"#afb1b8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):(0,l.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M6 15l6-6 6 6",stroke:"#afb1b8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,l.jsxs)("div",{className:"brand-div-options "+(S?"active":""),children:[(0,l.jsx)("input",{onChange:e=>{f(e.target.value.toLowerCase())},type:"text",placeholder:"Caut\u0103..."}),(0,l.jsx)(F,{})]})]}),(0,l.jsx)("div",{className:"search-result-page-filters-card",children:(0,l.jsxs)("div",{className:"price",children:[(0,l.jsx)("h3",{onClick:()=>w(!C),children:"Pre\u021b:"}),(0,l.jsxs)("div",{className:"price-buttons-div "+(C?"active":""),children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{onChange:e=>L(e),value:"100-500",type:"checkbox",id:"500-1000"}),(0,l.jsx)("label",{htmlFor:"100-500",children:"100-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{onChange:e=>L(e),value:"500-1000",type:"checkbox",id:"500-1000"}),(0,l.jsx)("label",{htmlFor:"500-1000",children:"500-1000"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{onChange:e=>L(e),value:"1000-2000",type:"checkbox",id:"1000-2000"}),(0,l.jsx)("label",{htmlFor:"1000-2000",children:"1000-2000"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{onChange:e=>L(e),value:"2000-99999",type:"checkbox",id:"Peste_2000"}),(0,l.jsx)("label",{htmlFor:"Peste_2000",children:"Peste 2000"})]})]})]})})]}),(0,l.jsx)("div",{className:"search-result-page-productCards-div",children:e.map((e=>(0,l.jsx)(n,{productId:e.id,imgURL:e.image_url,name:e.name,price:e.price},e.id)))})]})]}),(0,l.jsx)(c.A,{})]})}}}]);
//# sourceMappingURL=831.1386d7f7.chunk.js.map