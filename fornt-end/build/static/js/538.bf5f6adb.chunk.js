"use strict";(self.webpackChunkfornt_end=self.webpackChunkfornt_end||[]).push([[538],{538:(e,s,t)=>{t.r(s),t.d(s,{default:()=>u});var r=t(43),n=t(276),a=t(334),c=t(579);const u=()=>{const[e,s]=(0,r.useState)(""),[t,u]=(0,r.useState)(null),[o,l]=(0,r.useState)(null);return(0,r.useEffect)((()=>{fetch("https://api.devsite.cfd/auth/user",{credentials:"include"}).then((e=>e.json())).then((e=>{console.log("\ud83d\udfe2 User data:",e),s(e.user.displayname?e.user.displayname.split(" ")[0]:""),l(e.user.id)})).catch((e=>console.error("\u274c Eroare la ob\u021binerea numelui utilizatorului",e)))}),[]),(0,r.useEffect)((()=>{o?(console.log(`\ud83d\udfe1 Fetching order for userId: ${o}`),fetch(`https://api.devsite.cfd/orders/latest_order/${o}`,{credentials:"include"}).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()})).then((e=>{console.log("\ud83d\udfe2 Order data:",e),e[0].id?u(e[0].id):console.warn("\u26a0\ufe0f Order data nu con\u021bine un ID valid.")})).catch((e=>console.error("\u274c Eroare la ob\u021binerea ultimului ID din orders",e)))):console.warn("\u26a0\ufe0f userId este null, nu facem fetch pentru orderId.")}),[o]),(0,c.jsxs)("div",{className:"succesPage",children:[(0,c.jsx)(n.A,{}),(0,c.jsx)("main",{className:"succesPage-main",children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("h2",{className:"succes-title",children:["Multumim ",e,"! Comanda ta cu id-ul ",(0,c.jsx)("br",{})," #",t," a fost plasata cu succes!"]}),(0,c.jsx)("button",{className:"continue-shopping-button",onClick:()=>window.location.href="/",children:"Continua cumparaturile"})]})}),(0,c.jsx)(a.A,{})]})}}}]);
//# sourceMappingURL=538.bf5f6adb.chunk.js.map