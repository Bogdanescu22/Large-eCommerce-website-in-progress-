"use strict";(self.webpackChunkfornt_end=self.webpackChunkfornt_end||[]).push([[944],{433:(e,i,s)=>{s.d(i,{A:()=>a});s(43);var r=s(579);const a=()=>(0,r.jsx)("div",{className:"admin-header-div",children:(0,r.jsx)("button",{className:"admin-header-button",children:"Log in Admin"})})},944:(e,i,s)=>{s.r(i),s.d(i,{default:()=>t});var r=s(43),a=s(433),d=s(579);const n=e=>{let{userId:i,productId:s,description:r,zoomImageFunction:a,starsReviews:n,handleForbidButton1:t,imageUrl:l,handleButton:c,handleStatus:o}=e;return(0,d.jsxs)("div",{className:"reviewApproval-div",children:[(0,d.jsxs)("div",{className:"whole-card-without-buttons",children:[(0,d.jsxs)("div",{className:"cardApprovalReview-div-image-and-details",children:[(0,d.jsxs)("div",{className:"detailsApprovalReview-div",children:[(0,d.jsxs)("h3",{children:["User ID: ",(0,d.jsx)("span",{children:i})]}),(0,d.jsxs)("h3",{children:["Product ID: ",(0,d.jsx)("span",{children:s})]}),(0,d.jsx)("div",{children:[1,2,3,4,5].map((e=>(0,d.jsx)("span",{style:{fontSize:"24px",color:e<=n?"gold":"grey"},children:"\u2605"},`${e}-${s}`)))})]}),(0,d.jsx)("div",{className:"imageApprovalReview-div",children:(0,d.jsx)("img",{onClick:e=>a(e),src:null!=l?l:"https://olg.cc/wp-content/uploads/2015/01/placehold-800x500.jpg"})})]}),(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:"descriptionApprovalReview-div",children:[(0,d.jsx)("h2",{children:"Descriere"}),(0,d.jsx)("div",{children:(0,d.jsx)("p",{children:r})})]})})]}),(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:"buttonsApprovalReview-div",children:[(0,d.jsx)("div",{className:"approveButton-div",children:(0,d.jsx)("button",{value:"approve",onClick:c,children:"Aproba"})}),(0,d.jsx)("div",{className:"rejectButton-div",children:(0,d.jsx)("button",{onClick:t,children:"Respinge"})})]})})]})},t=()=>{const[e,i]=(0,r.useState)([]),[s,t]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[o,v]=(0,r.useState)(!1),[h,p]=(0,r.useState)(""),[u,m]=(0,r.useState)(null);(0,r.useEffect)((()=>{fetch("https://api.devsite.cfd/admin/reviews_for_approval",{credentials:"include"}).then((e=>e.json())).then((e=>{console.log("Recenzii:",e),i(e)})).catch((e=>{console.error("Eroare la fetch recenzii:",e)}))}),[]);const j=(s,r)=>{0!==e.length?fetch("https://api.devsite.cfd/admin/send_reviews",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:r.user_id,product_id:r.product_id,review_stars:r.review_stars,description:r.description,profile_picture:r.profile_picture,image_url:r.image_url,motiv_respingere:h,status:s.target.value})}).then((e=>e.json())).then((()=>{fetch(`https://api.devsite.cfd/verified_review/${r.id}`,{credentials:"include",method:"DELETE"}).then((e=>e.json())).then((()=>{i((e=>e.filter((e=>e.id!==r.id))))})).catch((e=>console.error("Eroare la DELETE:",e)))})).catch((e=>{console.error("Eroare la trimiterea recenziei:",e)})):alert("Nu sunt recenzii de aprobat!")},x=e=>{t(!0),c(e.target.src)};return(0,d.jsxs)("div",{className:"admin-approval-reviews-page",children:[(0,d.jsx)(a.A,{}),(0,d.jsxs)("main",{className:"admin-approval-reviews-panel-main",children:[(0,d.jsx)("h1",{children:"Reviews Approval"}),(0,d.jsx)("div",{children:e.map((e=>(0,d.jsx)(n,{userId:e.user_id,productId:e.product_id,description:e.description,starsReviews:e.review_stars,imageUrl:e.image_url,motiv_respingere:h,handleButton:i=>j(i,e),zoomImageFunction:x,handleForbidButton1:()=>(e=>{v(!0),m(e)})(e)},e.id)))})]}),s&&(0,d.jsxs)("div",{className:"zoom-overlay",children:[(0,d.jsx)("div",{className:"close-button-admin-approve-page",children:(0,d.jsx)("button",{onClick:()=>t(!1),children:"X"})}),(0,d.jsx)("div",{className:"zoom-overlay-background",children:(0,d.jsx)("img",{src:l,alt:"Zoomed",className:"zoomed-image"})})]}),o&&u&&(0,d.jsxs)("div",{className:"forbid-overlay",children:[(0,d.jsx)("div",{className:"close-fobid-button-div",children:(0,d.jsx)("button",{onClick:()=>{v(!1),p("")},className:"close-fobid-button",children:"X"})}),(0,d.jsx)("div",{className:"forbid-overlay1",children:(0,d.jsxs)("div",{className:"forbid-overlay-form-div",children:[(0,d.jsx)("h2",{children:"Motiv respingere"}),(0,d.jsx)("div",{className:"forbid-overlay-form",children:(0,d.jsx)("textarea",{onChange:e=>{p(e.target.value)},className:"forbid-overlay-textarea",placeholder:"Scrie motivul respingerii"})}),(0,d.jsx)("button",{value:"forbid",onClick:e=>{j(e,u),v(!1)},children:"Trimite"})]})})]})]})}}}]);
//# sourceMappingURL=944.d61f850c.chunk.js.map