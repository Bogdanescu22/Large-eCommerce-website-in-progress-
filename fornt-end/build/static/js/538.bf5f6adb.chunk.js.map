{"version":3,"file":"static/js/538.bf5f6adb.chunk.js","mappings":"yKAKA,MA+DA,EA/DmBA,KACjB,MAAOC,EAAUC,IAAeC,EAAAA,EAAAA,UAAS,KAClCC,EAASC,IAAcF,EAAAA,EAAAA,UAAS,OAChCG,EAAQC,IAAaJ,EAAAA,EAAAA,UAAS,MAyCrC,OAtCAK,EAAAA,EAAAA,YAAU,KACRC,MAAM,oCAAqC,CAAEC,YAAa,YACvDC,MAAMC,GAAQA,EAAIC,SAClBF,MAAMG,IACLC,QAAQC,IAAI,0BAAiBF,GAC7BZ,EAAYY,EAAKG,KAAKC,YAAcJ,EAAKG,KAAKC,YAAYC,MAAM,KAAK,GAAK,IAC1EZ,EAAUO,EAAKG,KAAKG,GAAG,IAExBC,OAAOC,GAAQP,QAAQQ,MAAM,yDAAgDD,IAAK,GACpF,KAGHd,EAAAA,EAAAA,YAAU,KACHF,GAKLS,QAAQC,IAAI,2CAAiCV,KAE7CG,MAAM,+CAA+CH,IAAU,CAAEI,YAAa,YAC3EC,MAAMC,IACL,IAAKA,EAAIY,GACP,MAAM,IAAIC,MAAM,uBAAuBb,EAAIc,UAE7C,OAAOd,EAAIC,MAAM,IAElBF,MAAMgB,IACLZ,QAAQC,IAAI,2BAAkBW,GAC1BA,EAAO,GAAGP,GACVf,EAAWsB,EAAO,GAAGP,IAErBL,QAAQa,KAAK,uDACf,IAEHP,OAAOC,GAAQP,QAAQQ,MAAM,0DAAiDD,MArB/EP,QAAQa,KAAK,gEAqBuE,GACrF,CAACtB,KAGFuB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYC,SAAA,EACzBC,EAAAA,EAAAA,KAACC,EAAAA,EAAM,KACPD,EAAAA,EAAAA,KAAA,QAAMF,UAAU,kBAAiBC,UAC/BF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEF,EAAAA,EAAAA,MAAA,MAAIC,UAAU,eAAcC,SAAA,CAAC,YACjB9B,EAAS,0BAAsB+B,EAAAA,EAAAA,KAAA,SAAS,KAAG5B,EAAQ,iCAE/D4B,EAAAA,EAAAA,KAAA,UAAQF,UAAU,2BAA2BI,QAASA,IAAMC,OAAOC,SAASC,KAAO,IAAIN,SAAC,iCAM5FC,EAAAA,EAAAA,KAACM,EAAAA,EAAM,MACH,C","sources":["Components/UserComponents/SuccesPaymentPage.jsx"],"sourcesContent":["\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Header from \"./Header.jsx\";\r\nimport Footer from \"./Footer.jsx\";\r\n\r\nconst SuccesPage = () => {\r\n  const [userName, setUserName] = useState(\"\");\r\n  const [orderId, setOrderId] = useState(null);\r\n  const [userId, setUserId] = useState(null);\r\n\r\n  // Fetch pentru userId\r\n  useEffect(() => {\r\n    fetch(\"https://api.devsite.cfd/auth/user\", { credentials: \"include\" })\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(\"üü¢ User data:\", data);\r\n        setUserName(data.user.displayname ? data.user.displayname.split(\" \")[0] : \"\");\r\n        setUserId(data.user.id);\r\n      })\r\n      .catch((err) => console.error(\"‚ùå Eroare la ob»õinerea numelui utilizatorului\", err));\r\n  }, []);\r\n\r\n  // Fetch pentru orderId - ruleazƒÉ DOAR c√¢nd `userId` este valid\r\n  useEffect(() => {\r\n    if (!userId) {\r\n      console.warn(\"‚ö†Ô∏è userId este null, nu facem fetch pentru orderId.\");\r\n      return;\r\n    }\r\n\r\n    console.log(`üü° Fetching order for userId: ${userId}`);\r\n\r\n    fetch(`https://api.devsite.cfd/orders/latest_order/${userId}`, { credentials: \"include\" })\r\n      .then((res) => {\r\n        if (!res.ok) {\r\n          throw new Error(`HTTP error! Status: ${res.status}`);\r\n        }\r\n        return res.json();\r\n      })\r\n      .then((result) => {\r\n        console.log(\"üü¢ Order data:\", result);\r\n        if (result[0].id) {\r\n            setOrderId(result[0].id);\r\n          } else {\r\n            console.warn(\"‚ö†Ô∏è Order data nu con»õine un ID valid.\");\r\n          }\r\n        })\r\n      .catch((err) => console.error(\"‚ùå Eroare la ob»õinerea ultimului ID din orders\", err));\r\n  }, [userId]); // Acest useEffect ruleazƒÉ doar c√¢nd `userId` se schimbƒÉ\r\n\r\n  return (\r\n    <div className=\"succesPage\">\r\n      <Header />\r\n      <main className=\"succesPage-main\">\r\n        <div>\r\n          <h2 className=\"succes-title\">\r\n            Multumim {userName}! Comanda ta cu id-ul <br></br> #{orderId} a fost plasata cu succes!\r\n          </h2>\r\n          <button className=\"continue-shopping-button\" onClick={() => window.location.href = \"/\"}>\r\n            Continua cumparaturile\r\n          </button>\r\n        </div>\r\n        \r\n      </main>\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SuccesPage;\r\n\r\n  "],"names":["SuccesPage","userName","setUserName","useState","orderId","setOrderId","userId","setUserId","useEffect","fetch","credentials","then","res","json","data","console","log","user","displayname","split","id","catch","err","error","ok","Error","status","result","warn","_jsxs","className","children","_jsx","Header","onClick","window","location","href","Footer"],"sourceRoot":""}