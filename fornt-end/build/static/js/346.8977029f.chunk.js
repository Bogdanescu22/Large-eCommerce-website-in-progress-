"use strict";(self.webpackChunkfornt_end=self.webpackChunkfornt_end||[]).push([[346],{346:(e,s,t)=>{t.r(s),t.d(s,{default:()=>l});var r=t(43),i=t(579);const n=e=>{let{setEmail:s,setPassword:t,Login:r,setForgotForm:n}=e;return(0,i.jsxs)("div",{className:"admin-login-page-form",children:[(0,i.jsx)("div",{children:(0,i.jsx)("h1",{children:"DevSite Admin"})}),(0,i.jsx)("hr",{}),(0,i.jsx)("div",{children:(0,i.jsx)("input",{type:"text",name:"email",placeholder:"Email",onChange:e=>s(e.target.value)})}),(0,i.jsx)("div",{children:(0,i.jsx)("input",{type:"password",name:"password",placeholder:"Password",onChange:e=>t(e.target.value)})}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{onClick:r,children:"Log in"})}),(0,i.jsx)("div",{children:(0,i.jsx)("p",{onClick:()=>n(!0),children:"Ai uitat parola?"})})]})},a=e=>{let{ForgotPassword:s}=e;const[t,n]=(0,r.useState)(15),[a,o]=(0,r.useState)(""),[l,d]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(l){if(t>0){const e=setInterval((()=>{n((e=>e-1))}),1e3);return()=>clearInterval(e)}o("Nu ai primit nimic? Retrimite!"),d(!1)}}),[t,l]),(0,i.jsxs)("div",{className:"waiting-time-reset-password",children:[l?(0,i.jsxs)("p",{children:["A\u0219teapt\u0103 ",t," secunde"]}):(0,i.jsx)("p",{children:a}),!l&&(0,i.jsx)("button",{onClick:()=>{n(15),d(!0),o(""),s()},children:"Trimite/Retrimite"})]})},o=e=>{let{setEmail2:s,ForgotPassword:t,setForgotForm:r}=e;return(0,i.jsxs)("div",{className:"admin-forgot-password-form",children:[(0,i.jsx)("div",{children:(0,i.jsx)("h1",{children:"DevSite Admin"})}),(0,i.jsx)("hr",{}),(0,i.jsx)("p",{onClick:()=>r(!1),children:"Inapoi la LogIn"}),(0,i.jsx)("div",{className:"admin-forgot-password-form-input",children:(0,i.jsx)("input",{onChange:e=>s(e.target.value),type:"email",placeholder:"Introdu adresa de email"})}),(0,i.jsx)(a,{ForgotPassword:t})]})},l=()=>{const[e,s]=(0,r.useState)(""),[t,a]=(0,r.useState)(""),[l,d]=(0,r.useState)(""),[c,h]=(0,r.useState)(!1);return(0,i.jsx)("div",{className:"admin-login-page",children:(0,i.jsx)("main",{className:"admin-login-page-main",children:c?(0,i.jsx)(o,{setEmail2:d,ForgotPassword:()=>{l&&fetch("https://api.devsite.cfd/admin/reset-password",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email2:l})}).then((e=>e.json())).then((e=>console.log("Email trimis:",e))).catch((e=>console.error("Eroare la resetare parol\u0103:",e)))},setForgotForm:h}):(0,i.jsx)(n,{setEmail:a,setPassword:s,Login:s=>{s.preventDefault(),fetch("https://api.devsite.cfd/admin/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})}).then((e=>{if(!e.ok)throw new Error("Eroare la fetch pt login");return e.json()})).then((e=>{console.log("Login cu succes:",e),window.location.href="/admin-panel"})).catch((e=>console.error("Eroare la login",e)))},setForgotForm:h})})})}}}]);
//# sourceMappingURL=346.8977029f.chunk.js.map